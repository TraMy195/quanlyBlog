@model IEnumerable<Blog.Models.Post>

<h2>Trang chủ</h2>
@{
    var categories = ViewBag.Categories as List<Blog.Models.Category>;
}

<div style="margin-bottom:15px">
    <b>📂 Chuyên mục:</b>
    <a asp-action="Index">Tất cả</a>
    @foreach (var c in categories)
    {
        <text> | </text>
        <a asp-action="Index"
           asp-route-categoryId="@c.CategoryId">
            @c.Name
        </a>
    }
</div>

<form asp-action="Index" method="get" style="margin-bottom:20px">
    <input type="text"
           name="keyword"
           value="@ViewBag.Keyword"
           placeholder="🔍 Tìm bài viết..."
           style="width:250px; padding:6px" />

    @if (ViewBag.CategoryId != null)
    {
        <input type="hidden" name="categoryId"
               value="@ViewBag.CategoryId" />
    }

    <button type="submit">Tìm</button>
</form>




@foreach (var post in Model)
{
    <div style="border-bottom:1px solid #ddd; margin-bottom:15px; padding-bottom:10px">
        @if (!string.IsNullOrEmpty(post.ImagePath))
        {
            <img src="~/images/@post.ImagePath"
                 style="width:150px; float:left; margin-right:15px" />
        }

        <h3>
            <a asp-action="Details" asp-route-id="@post.PostId">
                @post.Title
            </a>
        </h3>

        <p>
            @post.Content.Substring(0,
            Math.Min(100, post.Content.Length))...
    </p>

    <small>
        👤 @post.Author?.Username |
        📅 @post.CreatedAt.ToString("dd/MM/yyyy")
    </small>

    <div style="clear:both"></div>
</div>

}
